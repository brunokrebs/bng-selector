!function(){function t(t){return(" "+t.className+" ").indexOf(" bng-selector-mhc ")>-1}var e=angular.module("bng-selector",[]);e.components=[];var l=27;window.addEventListener("click",function(l){for(var n=l.target,s=null,c=!0;t(n);)c=!1,s=n,n=n.parentElement;for(var o=0;o<e.components.length;o++){var r=e.components[o];(c||r!=s)&&r.handleCloseSelector()}});var n=function(t,n,s){function c(){if(a.selectedItems=[],a.selected&&a.selected.length)for(var t=0;t<a.selected.length;t++)for(var e=a.selected[t],l=0;l<a.options.length;l++){var n=a.options[l];e[a.key]==n[a.key]&&(n[a.uniqueSelecteProperty]=!0,a.selectedItems.push(n))}}function o(){u.addEventListener("keydown",i),a.showOptions=!0}function r(t){u.removeEventListener("keydown",i),a.showOptions=!1,a.term="",a.filteredOptions=a.options,t||s.$apply()}function i(t){t.keyCode==l&&r()}var a=this;a.uniqueSelecteProperty="selectedBng"+(new Date).getTime();var u=t[0],d=u.firstChild;e.components.push(d);var p=u.querySelector(".bng-selector-filter-input");d.handleCloseSelector=r,a.multi&&null==a.showMultiControls&&(a.showMultiControls=!0),a.showOptions=!1,a.term="",a.filteredOptions=a.options,a.key=a.key||a.label,a.selectAllLabel||(a.selectAllLabel="Select all"),a.clearAllLabel||(a.clearAllLabel="Clear selection"),a.toggleFilter=function(t){a.disabled||(a.showOptions?r(!0):(o(),n(function(){p.focus()},100)))},a.suggest=function(){if(term=a.term.trim().toLowerCase(),""==term)return a.filteredOptions=a.options;a.filteredOptions=[];for(var t=0;t<a.options.length;t++){var e=a.options[t];e[a.label].toLowerCase().indexOf(term)!==-1&&a.filteredOptions.push(e)}return a.filteredOptions},a.select=function(t){if(a.multi){delete t[a.uniqueSelecteProperty];var e=a.selectedItems.indexOf(t);e>=0?(t[a.uniqueSelecteProperty]=!1,a.selectedItems.splice(e,1)):(t[a.uniqueSelecteProperty]=!0,a.selectedItems.push(t)),a.onSelect({option:a.selectedItems})}else a.showOptions=!1,a.selected=t,a.selected.label=t[a.label],a.onSelect({option:t})},a.selectAll=function(){for(var t=0;t<a.filteredOptions.length;t++){var e=a.filteredOptions[t],l=a.selectedItems.indexOf(e);l<0&&(a.selectedItems.push(e),e[a.uniqueSelecteProperty]=!0)}a.onSelect({option:a.selectedItems})},a.clear=function(t){if(!a.disabled){a.selected=null,a.selectedItems=[],a.multi||r(!0);for(var e=0;e<a.options.length;e++)delete a.options[e][a.uniqueSelecteProperty];a.onUnselect(),t&&t.stopPropagation()}},a.$onChanges=function(t){t.options&&t.options.currentValue&&(t.options.isFirstChange()||(a.filteredOptions=t.options.currentValue),c()),!a.multi&&t.selected&&t.selected.currentValue&&(t.selected.isFirstChange()||(a.selected=t.selected.currentValue,a.selected.label=t.selected.currentValue[a.label]),c())}};n.$inject=["$element","$timeout","$scope"],e.component("bngSelector",{bindings:{onSelect:"&",onUnselect:"&",options:"<",selected:"<",showFilter:"<",emptyLabel:"@",multi:"<",showMultiControls:"<",selectAllLabel:"@",clearAllLabel:"@",disabled:"<",key:"@",label:"@"},templateUrl:"bng-selector.html",controller:n})}(),angular.module("bng-selector").run(["$templateCache",function(t){t.put("bng-selector.html",'<div class="bng-selector bng-selector-mhc" ng-class="{ \'disabled\': $ctrl.disabled }">\n\t<div class="bng-selector-mhc bng-selector-selected" ng-click="$ctrl.toggleFilter($event)">\n\t\t{{$ctrl.selected[$ctrl.label] || $ctrl.emptyLabel}}\n\t\t<i class="bng-selector-mhc fa fa-caret-down" ng-show="! $ctrl.showOptions"></i>\n\t\t<i class="bng-selector-mhc fa fa-caret-up" ng-show="$ctrl.showOptions"></i>\n\t\t<i class="bng-selector-mhc fa fa-times" ng-show="$ctrl.selected && !$ctrl.multi"\n\t\t   ng-click="$ctrl.clear($event)"></i>\n\t</div>\n\t<div class="bng-selector-mhc bng-selector-filter" ng-show="$ctrl.showOptions">\n\t\t<div class="bng-selector-mhc bng-selector-filter-area" ng-class="{ \'bng-selector-show-input\': $ctrl.showFilter }">\n\t\t\t<input class="bng-selector-mhc bng-selector-filter-input" type="text"\n\t\t\t\t   ng-change="$ctrl.suggest()"\n\t\t\t\t   ng-model="$ctrl.term"\n\t\t\t\t   ng-show="$ctrl.showFilter">\n\t\t\t<ul class="bng-selector-mhc">\n\t\t\t\t<li class="bng-selector-mhc" ng-show="$ctrl.multi && $ctrl.showMultiControls">\n\t\t\t\t\t<button class="bng-selector-mhc btn btn-sm btn-default"\n\t\t\t\t\t\t\tng-click="$ctrl.selectAll()">\n\t\t\t\t\t\t<i class="bng-selector-mhc fa fa-check"></i> {{$ctrl.selectAllLabel}}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button class="bng-selector-mhc btn btn-sm btn-default"\n\t\t\t\t\t\t\tng-click="$ctrl.clear()">\n\t\t\t\t\t\t<i class="bng-selector-mhc fa fa-times"></i> {{$ctrl.clearAllLabel}}\n\t\t\t\t\t</button>\n\t\t\t\t</li>\n\t\t\t\t<li ng-repeat="opt in $ctrl.filteredOptions"\n\t\t\t\t\tng-click="$ctrl.select(opt)" class="bng-selector-mhc bng-selector-option">\n\t\t\t\t\t<input type="checkbox" ng-show="$ctrl.multi"\n\t\t\t\t\t\t   ng-model="opt[$ctrl.uniqueSelecteProperty]" class="bng-selector-mhc" />\n\t\t\t\t\t{{opt[$ctrl.label]}}\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n</div>')}]);