!function(){var t=angular.module("bng-selector",[]),e=function(t,e,l){function n(){o.addEventListener("keydown",c),o.addEventListener("blur",s),r.addEventListener("blur",function(){e(function(){s()},150)}),i.showFilter=!0}function s(t){o.removeEventListener("keydown",c),r.removeEventListener("keydown",c),i.showFilter=!1,i.term="",i.filteredOptions=i.options,t||l.$apply()}function c(t){27==t.keyCode&&s()}var i=this,o=t[0],r=o.querySelector(".bng-selector-filter-input");i.showFilter=!1,i.term="",i.filteredOptions=i.options,i.selectedItems=[],i.selectAllLabel||(i.selectAllLabel="Select all"),i.clearAllLabel||(i.clearAllLabel="Clear selection"),i.toggleFilter=function(t){i.disabled||(t&&t.stopPropagation(),i.showFilter?s(!0):(n(),e(function(){r.focus()},100)))},i.suggest=function(){if(term=i.term.trim().toLowerCase(),""==term)return i.filteredOptions=i.options;i.filteredOptions=[];for(var t=0;t<i.options.length;t++){var e=i.options[t];e[i.label].toLowerCase().indexOf(term)!==-1&&i.filteredOptions.push(e)}return i.filteredOptions},i.select=function(t){if(i.showFilter=!1,i.multi){delete t.selected;var e=i.selectedItems.indexOf(t),l=e>=0;l?i.selectedItems.splice(e,1):i.selectedItems.push(t),i.onSelect({option:i.selectedItems}),t.selected=l}else i.selected=t,i.selected.label=t[i.label],i.onSelect({option:t})},i.selectAll=function(){for(var t=0;t<i.filteredOptions.length;t++){var e=i.filteredOptions[t];delete e.selected;var l=i.selectedItems.indexOf(e);l<0&&(i.selectedItems.push(e),e.selected=!0)}i.onSelect({option:i.selectedItems})},i.clear=function(t){if(!i.disabled){i.selected=null,i.selectedItems=[],s(!0);for(var e=0;e<i.options.length;e++)delete i.options[e].selected;i.onUnselect(),t&&t.stopPropagation()}},i.$onChanges=function(t){t.options&&t.options.currentValue&&(t.options.isFirstChange()||(i.filteredOptions=t.options.currentValue)),!i.multi&&t.selected&&t.selected.currentValue&&(t.selected.isFirstChange()||(i.selected=t.selected.currentValue,i.selected.label=t.selected.currentValue[i.label]))}};e.$inject=["$element","$timeout","$scope"],t.component("bngSelector",{bindings:{onSelect:"&",onUnselect:"&",options:"<",selected:"<",multi:"<",selectAllLabel:"<",disabled:"<",label:"@"},templateUrl:"bng-selector.html",controller:e})}(),angular.module("bng-selector").run(["$templateCache",function(t){t.put("bng-selector.html",'<div class="bng-selector" ng-class="{ \'disabled\': $ctrl.disabled }">\n\t<div class="bng-selector-selected" ng-click="$ctrl.toggleFilter($event)">\n\t\t{{$ctrl.selected[$ctrl.label]}}\n\t\t<i class="fa fa-caret-down" ng-show="! $ctrl.showFilter"></i>\n\t\t<i class="fa fa-caret-up" ng-show="$ctrl.showFilter"></i>\n\t\t<i class="fa fa-times" ng-show="$ctrl.selected && !$ctrl.multi"\n\t\t   ng-click="$ctrl.clear($event)"></i>\n\t</div>\n\t<div class="bng-selector-filter" ng-show="$ctrl.showFilter">\n\t\t<div class="bng-selector-filter-area">\n\t\t\t<input class="bng-selector-filter-input" type="text"\n\t\t\t\t   ng-change="$ctrl.suggest()"\n\t\t\t\t   ng-model="$ctrl.term">\n\t\t\t<ul>\n\t\t\t\t<li ng-show="$ctrl.multi">\n\t\t\t\t\t<button class="btn btn-sm btn-default"\n\t\t\t\t\t\t\tng-click="$ctrl.selectAll()">\n\t\t\t\t\t\t<i class="fa fa-check"></i> {{$ctrl.selectAllLabel}}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button class="btn btn-sm btn-default"\n\t\t\t\t\t\t\tng-click="$ctrl.clear()">\n\t\t\t\t\t\t<i class="fa fa-times"></i> {{$ctrl.clearAllLabel}}\n\t\t\t\t\t</button>\n\t\t\t\t</li>\n\t\t\t\t<li ng-repeat="opt in $ctrl.filteredOptions"\n\t\t\t\t\tng-click="$ctrl.select(opt)" class="bng-selector-option">\n\t\t\t\t\t<input type="checkbox" ng-show="$ctrl.multi"\n\t\t\t\t\t\t   ng-model="opt.selected" />\n\t\t\t\t\t{{opt[$ctrl.label]}}\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n</div>')}]);